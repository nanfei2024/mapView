# ⚠️ 重要说明 - 请先阅读

## 📌 当前状态

### ✅ 已完成功能

1. **MinerU API 集成** - 完全集成并可用
2. **URL 上传解析** - 完全可用，推荐使用 ⭐⭐⭐⭐⭐
3. **界面优化** - 地质文档专业风格
4. **实时进度显示** - 解析进度实时更新
5. **结果下载** - ZIP 格式结果文件

### ⚠️ 功能限制

**本地文件上传功能由于浏览器安全限制，暂时无法使用。**

---

## 🎯 推荐使用方式

### ✅ 方式：URL 上传（强烈推荐）

这是**唯一可靠的使用方式**！

#### 步骤：

1. **将文件上传到可访问的位置**
   
   选择以下任一方式：
   
   - **阿里云 OSS**（推荐，稳定）
   - **腾讯云 COS**（推荐，稳定）
   - **七牛云**（有免费额度）
   - **GitHub Release**（免费，适合小文件）
   
   详细教程：[如何获取文件直链URL.md](./如何获取文件直链URL.md)

2. **获取文件直链 URL**
   
   示例：
   ```
   https://your-bucket.oss-cn-hangzhou.aliyuncs.com/file.pdf
   ```

3. **使用系统解析**
   
   - 访问：`http://localhost:5173`
   - 点击：🌍 地质文档数字化
   - 切换到："URL 上传"标签
   - 输入：文件直链URL
   - 点击："提交"
   - 等待：解析完成（显示进度）
   - 下载：结果 ZIP 文件

---

## ❌ 不可用功能

### 本地文件上传

**原因：**
- 浏览器安全策略阻止跨域上传到云端存储
- MinerU 的文件上传流程需要直接上传到阿里云 OSS
- 浏览器禁止这种跨域操作（CORS 限制）

**表现：**
- 点击"开始解析"会弹出警告
- 尝试上传会失败
- 控制台显示 CORS 错误

**解决方案：**
- **改用 URL 上传方式**（推荐）
- 或配置后端服务器代理（需要额外开发）

---

## 📚 完整文档

### 必读文档

1. **[README-地质文档数字化.md](./README-地质文档数字化.md)**
   - 项目总览
   - 功能说明
   - 文档导航

2. **[如何获取文件直链URL.md](./如何获取文件直链URL.md)**
   - 多种获取直链的方法
   - 详细操作步骤
   - 实际示例

3. **[CORS问题解决方案.md](./CORS问题解决方案.md)**
   - 问题详细说明
   - 为什么本地上传不可用
   - 技术解决方案

### 其他文档

4. **[快速开始-地质文档数字化.md](./快速开始-地质文档数字化.md)**
   - 快速上手指南

5. **[MinerU_API集成说明.md](./MinerU_API集成说明.md)**
   - API 技术文档

---

## 🚀 立即开始

### 第一步：启动项目

```bash
cd mapView-main
npm install  # 如果还没安装
npm run dev
```

### 第二步：准备文件

**选择以下任一方式：**

#### 方式 A：使用阿里云 OSS（推荐）

1. 注册阿里云账号
2. 开通 OSS 服务
3. 创建 Bucket（公共读）
4. 上传文件
5. 获取 URL

#### 方式 B：使用 GitHub Release（免费）

1. 在 GitHub 仓库创建 Release
2. 上传文件作为附件
3. 右键复制文件链接
4. 使用该链接

#### 方式 C：使用七牛云（免费额度）

1. 注册七牛云
2. 创建存储空间
3. 上传文件
4. 获取外链

### 第三步：开始解析

1. 打开 `http://localhost:5173`
2. 点击 🌍 地质文档数字化
3. 切换到"URL 上传"
4. 粘贴文件 URL
5. 点击"提交"
6. 等待解析
7. 下载结果 ✅

---

## ⚡ 常见问题

### Q: 为什么不能直接上传本地文件？

**A:** 浏览器安全限制（CORS 策略）。MinerU 需要将文件上传到阿里云 OSS，但浏览器禁止这种跨域操作。

### Q: 一定要用对象存储吗？

**A:** 不一定，任何可以提供文件直链的服务都可以，比如 GitHub Release、七牛云等。

### Q: 使用对象存储需要付费吗？

**A:** 
- 阿里云/腾讯云：按量付费，小文件成本很低（几分钱/GB）
- 七牛云：有免费额度，适合测试
- GitHub：完全免费（有大小限制）

### Q: URL 上传和本地上传有什么区别？

**A:**
- **URL 上传**：✅ 稳定可靠，无限制
- **本地上传**：❌ 受 CORS 限制，无法使用

### Q: 有没有简单的测试方法？

**A:** 使用 GitHub Release：
1. 创建一个测试仓库
2. 创建 Release
3. 上传测试 PDF
4. 复制文件链接
5. 在系统中使用

---

## 💡 最佳实践

### 个人用户

- **测试阶段**：使用 GitHub Release 或七牛云
- **正式使用**：使用阿里云 OSS 或腾讯云 COS

### 企业用户

- **推荐**：阿里云 OSS 或腾讯云 COS
- **优点**：稳定、快速、可靠

### 批量处理

如果需要批量处理多个文件：

1. 批量上传到对象存储
2. 整理所有文件的 URL
3. 依次在系统中处理
4. 下载所有结果

---

## 🔧 技术说明

### CORS 问题

**问题根源：**
```
浏览器 → MinerU API（申请上传链接）→ ✅ 成功
浏览器 → 阿里云 OSS（上传文件）→ ❌ CORS 阻止
```

**无法通过前端解决的原因：**
- OSS 的 CORS 配置在服务端
- 我们无法修改 MinerU 服务器的配置
- 浏览器强制执行 CORS 策略

**解决方案：**
- 使用 URL 上传（绕过问题）
- 或配置后端代理（需要额外开发）

---

## 📞 获取帮助

如果遇到问题：

1. **查看文档**：本目录下的所有 `.md` 文件
2. **检查错误**：浏览器控制台（F12）的错误信息
3. **确认URL**：确保 URL 是可直接访问的直链

### 验证 URL 是否有效

在浏览器地址栏粘贴 URL：
- ✅ 如果直接下载或显示文件 = 有效
- ❌ 如果跳转到其他页面 = 无效

---

## 🎊 总结

### 当前可用功能

✅ **URL 上传解析** - 完全可用
- 准备文件直链
- 使用系统解析
- 下载结果

✅ **实时进度显示**
- 解析页数跟踪
- 状态实时更新

✅ **结果下载**
- Markdown 格式
- JSON 格式
- 提取的图片

### 推荐使用流程

```
上传文件到对象存储
      ↓
   获取直链 URL
      ↓
在系统中使用 URL 上传
      ↓
   等待解析完成
      ↓
  下载结果 ZIP
```

---

## 🚀 开始使用

准备好了吗？让我们开始！

```bash
npm run dev
```

**记住：使用 URL 上传方式！** 📌

详细教程：[如何获取文件直链URL.md](./如何获取文件直链URL.md)

