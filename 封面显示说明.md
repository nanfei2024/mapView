# 知识图谱书籍封面显示功能

## ✅ 已实现的功能

### 📚 书籍节点显示封面图片

现在知识图谱的书籍节点（第一层级）会显示实际的书籍封面图片，而不是普通的圆形节点。

### 🎨 视觉效果

1. **书籍节点**
   - 显示封面图片（100x140 像素）
   - 书名显示在封面下方
   - 书名有白色半透明背景，更易阅读
   - 字体更大更粗（13px，600 字重）

2. **其他节点**
   - 保持原有的圆形彩色节点
   - 标签样式不变

3. **布局优化**
   - 增加节点间距（repulsion: 350）
   - 增加连接线长度（150-250）
   - 避免封面图片重叠

### 📖 三本书的封面

1. **板块构造与地貌形迹**
   - 封面路径：`/images/板块构造与地貌形迹.jpg`

2. **亚洲地貌圈及其板块造貌构造纲要**
   - 封面路径：`/images/亚洲地貌圈及其板块造貌构造纲要.jpg`

3. **地学新两论**
   - 封面路径：`/images/地学新两论 上篇 板块造貌构造学-兼论板块学说新发展.jpg`

## 🎯 使用效果

### 访问页面
```
http://localhost:5173/hierarchical-graph
```

### 预期显示
- 3 个书籍封面图片整齐排列
- 每个封面下方显示书名
- 点击封面可以展开查看目录、图表、引文
- 鼠标悬停显示提示："点击展开查看目录"

## 🔧 技术实现

### ECharts 图片符号
```typescript
// 为书籍节点设置图片符号
if (node.category === '书籍' && node.coverUrl) {
  nodeData.symbol = `image://${node.coverUrl}`;
  nodeData.symbolSize = [100, 140]; // [宽度, 高度]
}
```

### 标签样式优化
```typescript
label: {
  show: true,
  position: 'bottom',
  distance: 15,  // 距离封面15像素
  fontSize: 13,
  fontWeight: 600,
  backgroundColor: 'rgba(255,255,255,0.9)',  // 半透明白色背景
  padding: [4, 8],
  borderRadius: 4
}
```

## 📊 对比效果

### 修改前
- 所有节点都是彩色圆圈
- 难以区分不同书籍
- 视觉效果单调

### 修改后
- 书籍节点显示真实封面
- 一眼就能识别不同书籍
- 视觉效果更专业、更直观
- 更符合实际使用场景

## 🎨 样式特点

1. **封面比例**：100x140（接近实际书籍封面比例）
2. **书名背景**：半透明白色，确保文字清晰
3. **圆角设计**：4px 圆角，现代化风格
4. **间距优化**：节点间距增加，避免拥挤

## 💡 后续优化建议

### 1. 封面加载失败处理
可以添加默认封面图片：
```typescript
nodeData.symbol = `image://${node.coverUrl || '/images/default-book.jpg'}`;
```

### 2. 封面尺寸调整
可以根据需要调整封面大小：
```typescript
symbolSize: [80, 112]  // 更小
symbolSize: [120, 168] // 更大
```

### 3. 添加阴影效果
可以为封面添加阴影：
```typescript
itemStyle: {
  shadowBlur: 10,
  shadowColor: 'rgba(0,0,0,0.3)',
  shadowOffsetX: 0,
  shadowOffsetY: 4
}
```

### 4. 悬停效果
可以添加悬停时的缩放效果：
```typescript
emphasis: {
  scale: 1.1,  // 悬停时放大10%
  shadowBlur: 20
}
```

## 🐛 故障排除

### 问题1：封面不显示
**可能原因：**
- 图片路径错误
- 图片文件不存在
- 图片格式不支持

**解决方案：**
1. 检查 `/public/images/` 目录下是否有对应图片
2. 确认图片文件名完全匹配
3. 支持的格式：jpg, png, svg

### 问题2：封面显示模糊
**可能原因：**
- 图片分辨率太低
- 浏览器缩放比例不是100%

**解决方案：**
1. 使用高分辨率图片（建议至少 200x280）
2. 调整浏览器缩放到 100%

### 问题3：布局混乱
**可能原因：**
- 节点间距太小
- 力导向参数不合适

**解决方案：**
调整力导向参数：
```typescript
force: { 
  repulsion: 400,      // 增加斥力
  edgeLength: [180, 300]  // 增加连接线长度
}
```

## 📝 数据结构

```typescript
interface GraphNode {
  id: string;
  name: string;
  category: string;
  level: number;
  symbolSize: number;
  coverUrl?: string;  // 新增：封面图片URL
  // ... 其他字段
}
```

## 🎉 效果展示

现在的知识图谱更加直观和美观：
- ✅ 真实的书籍封面
- ✅ 清晰的书名标签
- ✅ 合理的节点间距
- ✅ 专业的视觉效果

刷新页面即可看到新效果！
