# 如何获取文件直链 URL

## 为什么需要文件直链？

由于浏览器安全限制，本地文件无法直接上传到云端进行解析。您需要先将文件上传到一个可公开访问的位置，然后使用文件的直链 URL 进行解析。

---

## 🌐 推荐方法

### 方法 1：阿里云 OSS（推荐）

**步骤：**

1. 注册阿里云账号：https://www.aliyun.com
2. 开通对象存储 OSS 服务
3. 创建 Bucket（设置为公共读）
4. 上传文件
5. 点击文件获取 URL

**优点：**
- ✅ 稳定可靠
- ✅ 速度快
- ✅ 永久有效
- ✅ 适合大文件

**费用：** 
- 按量付费，小文件成本很低
- 新用户有免费额度

---

### 方法 2：腾讯云 COS

**步骤：**

1. 注册腾讯云账号：https://cloud.tencent.com
2. 开通对象存储 COS
3. 创建存储桶（公有读私有写）
4. 上传文件
5. 获取对象地址

**优点：**
- ✅ 操作简单
- ✅ 性能好
- ✅ 国内访问快

---

### 方法 3：七牛云

**步骤：**

1. 注册七牛云：https://www.qiniu.com
2. 创建存储空间
3. 上传文件
4. 获取外链

**优点：**
- ✅ 免费额度较大
- ✅ 适合测试

---

### 方法 4：GitHub Release（适合小文件）

**步骤：**

1. 在 GitHub 仓库创建 Release
2. 上传文件作为附件
3. 右键复制文件链接

**示例 URL：**
```
https://github.com/username/repo/releases/download/v1.0/file.pdf
```

**优点：**
- ✅ 免费
- ✅ 简单
- ✅ 永久有效

**限制：**
- ⚠️ 单个文件最大 2GB
- ⚠️ 国内访问可能较慢

---

### 方法 5：临时文件分享服务

#### 奶牛快传（https://cowtransfer.com）
- 上传文件后获取分享链接
- ⚠️ 有效期有限（通常几天）
- 适合临时测试

#### WeTransfer（https://wetransfer.com）
- 国际文件传输服务
- ⚠️ 国内访问可能不稳定
- 文件有效期 7 天

---

## ⚠️ 不推荐的方法

### ❌ 百度网盘普通分享链接
```
https://pan.baidu.com/s/1xxx
```
- 需要提取码
- 不是直链，MinerU 无法访问

### ❌ 微信/QQ 文件链接
- 需要登录
- 短期有效
- 不是直链

---

## 📋 如何验证直链是否有效？

### 测试方法：

1. **在浏览器地址栏粘贴链接**
   - 如果直接下载文件或显示文件 = ✅ 有效
   - 如果跳转到登录页或网盘页面 = ❌ 无效

2. **使用 curl 测试**（命令行）
   ```bash
   curl -I "你的URL"
   ```
   - 返回 `200 OK` = ✅ 有效
   - 返回 `302` 或 `404` = ❌ 无效

3. **特征识别**
   - ✅ 有效直链通常包含文件名和扩展名
   - ✅ 示例：`https://xxx.com/files/report.pdf`
   - ❌ 无效：`https://pan.baidu.com/s/abc123`

---

## 💡 快速上传方案（开发测试）

### 使用 Python 简单 HTTP 服务器

如果只是测试，可以在本地快速启动一个 HTTP 服务器：

```bash
# 进入文件所在目录
cd /path/to/your/files

# 启动 HTTP 服务器（Python 3）
python -m http.server 8000
```

然后使用：
```
http://你的公网IP:8000/文件名.pdf
```

**注意：**
- ⚠️ 需要公网 IP 或使用内网穿透工具
- ⚠️ 仅适合开发测试
- ⚠️ 不适合生产环境

---

## 🔧 内网穿透工具

如果需要将本地文件临时暴露到公网：

### ngrok
```bash
# 安装 ngrok
# 启动服务
ngrok http 8000
```

获得临时公网 URL：
```
https://xxxxx.ngrok.io
```

### frp（免费开源）
- 需要自己搭建服务器
- 更稳定，适合长期使用

---

## 📊 各方法对比

| 方法 | 成本 | 稳定性 | 速度 | 适用场景 |
|------|------|--------|------|----------|
| 阿里云 OSS | 💰 低 | ⭐⭐⭐⭐⭐ | 🚀 快 | 生产环境 |
| 腾讯云 COS | 💰 低 | ⭐⭐⭐⭐⭐ | 🚀 快 | 生产环境 |
| 七牛云 | 💰 免费额度 | ⭐⭐⭐⭐ | 🚀 快 | 开发测试 |
| GitHub Release | 💰 免费 | ⭐⭐⭐⭐ | 🐢 慢 | 小文件 |
| 奶牛快传 | 💰 免费 | ⭐⭐⭐ | 🚀 快 | 临时测试 |
| 本地+内网穿透 | 💰 免费 | ⭐⭐ | 🐢 慢 | 开发测试 |

---

## ✅ 实际操作示例

### 示例：使用阿里云 OSS

1. **创建 Bucket**
   - 名称：`geo-documents`
   - 区域：华东1（杭州）
   - 读写权限：公共读

2. **上传文件**
   - 文件：`geology-report-2024.pdf`
   - 上传完成后获取 URL

3. **获得的直链**
   ```
   https://geo-documents.oss-cn-hangzhou.aliyuncs.com/geology-report-2024.pdf
   ```

4. **在地质文档数字化页面使用**
   - 切换到"URL 上传"
   - 粘贴链接
   - 点击"提交"
   - 等待解析完成 ✅

---

## 🆘 常见问题

### Q: 上传到百度网盘可以吗？
**A:** 普通分享链接不行，需要使用支持直链的网盘或对象存储服务。

### Q: 文件太大怎么办？
**A:** 使用阿里云 OSS 或腾讯云 COS，支持大文件，且速度快。

### Q: 没有公网 IP 怎么办？
**A:** 使用对象存储服务（如阿里云 OSS），或使用内网穿透工具（如 ngrok）。

### Q: 链接有效期多久？
**A:** 
- 对象存储（OSS/COS）：永久有效
- GitHub Release：永久有效
- 临时分享服务：3-7 天

### Q: 需要付费吗？
**A:** 
- 对象存储：按量付费，小文件成本很低（几分钱/GB）
- GitHub：免费（有大小限制）
- 七牛云：有免费额度

---

## 🎯 推荐方案（按需选择）

### 个人用户/测试
- **首选：** 七牛云（免费额度）
- **备选：** GitHub Release

### 企业用户/生产环境
- **首选：** 阿里云 OSS
- **备选：** 腾讯云 COS

### 临时测试
- **首选：** 奶牛快传
- **备选：** 本地 HTTP 服务器 + 内网穿透

---

## 📞 需要帮助？

如果在获取文件直链时遇到问题，可以：

1. 查看对象存储服务的官方文档
2. 使用上述验证方法测试链接是否有效
3. 确保链接是直接下载链接，而不是分享页面

**记住：** 有效的直链应该能在浏览器地址栏直接打开或下载文件！

