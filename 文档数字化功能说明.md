# 地质文档数字化功能说明

## 功能概述

将原有的"文件上传"板块升级为"地质文档数字化"功能，提供专业的地质文档解析和处理服务。

## 主要特性

### 1. 双模式上传
- **本地上传**：支持拖拽或点击上传本地文件
- **URL上传**：支持通过URL链接上传在线文档

### 2. 支持的文档类型
- PDF文档
- Word文档（DOC、DOCX）
- 文本文件（TXT）
- 图片文件（PNG、JPG、JPEG）

### 3. 文档分类
- 地质报告
- 地质书籍
- 其他文档

### 4. 文件管理
- 文件列表展示
- 批量处理功能
- 单个文件处理
- 处理状态追踪（待处理、解析中、已完成、失败）
- 查看解析结果
- 删除文件

### 5. 示例模板
提供常见文档类型的示例模板供参考

## 界面设计特点

- **简洁现代**：采用扁平化设计风格
- **色彩柔和**：使用浅灰、浅蓝等柔和色调
- **交互友好**：悬停效果、过渡动画提升用户体验
- **响应式布局**：支持不同屏幕尺寸

## 使用方法

### 步骤1：访问地质文档数字化页面
在主页点击"地质文档数字化"按钮（带🌍地球图标），跳转到地质文档数字化页面

### 步骤2：选择上传方式
- 选择"本地上传"标签页上传本地文件
- 选择"URL上传"标签页输入在线文档地址

### 步骤3：选择文档类型
根据实际情况选择文档类型：
- 地质报告
- 地质书籍
- 其他文档

### 步骤4：上传文件
- **本地上传**：拖拽文件到上传区域，或点击"选择文件"按钮
- **URL上传**：输入URL地址后点击"提交"

### 步骤5：处理文件
- 单个处理：点击文件右侧的"开始解析"按钮
- 批量处理：点击底部的"批量解析"按钮

### 步骤6：查看结果
处理完成后，点击"查看结果"按钮查看解析结果

## 后续功能扩展

### OCR API集成
当前界面已预留OCR API接入点，可以在以下位置添加实际的API调用：

#### 1. 单个文件处理
位置：`DocumentDigitalizationPage.vue` 中的 `processFile` 方法

```typescript
const processFile = async (file: UploadedFile, index: number) => {
  uploadedFiles.value[index].status = 'processing';
  
  try {
    // TODO: 这里添加实际的OCR API调用
    const formData = new FormData();
    if (file.file) {
      formData.append('file', file.file);
    }
    formData.append('type', file.type || 'other');
    
    // 示例API调用
    // const response = await fetch('YOUR_OCR_API_ENDPOINT', {
    //   method: 'POST',
    //   body: formData
    // });
    // const result = await response.json();
    
    uploadedFiles.value[index].status = 'completed';
    // 保存结果到文件对象中
    // uploadedFiles.value[index].result = result;
  } catch (error) {
    console.error('处理失败:', error);
    uploadedFiles.value[index].status = 'error';
  }
};
```

#### 2. URL上传处理
位置：`DocumentDigitalizationPage.vue` 中的 `handleUrlUpload` 方法

```typescript
const handleUrlUpload = async () => {
  if (!urlInput.value.trim()) {
    alert('请输入有效的URL地址');
    return;
  }
  
  try {
    // TODO: 这里添加URL文档下载和处理的API调用
    // const response = await fetch('YOUR_API_ENDPOINT', {
    //   method: 'POST',
    //   headers: { 'Content-Type': 'application/json' },
    //   body: JSON.stringify({
    //     url: urlInput.value,
    //     type: fileType.value
    //   })
    // });
    
    uploadedFiles.value.push({
      name: '从URL获取: ' + urlInput.value.split('/').pop(),
      size: 0,
      status: 'pending',
      type: fileType.value
    });
    
    urlInput.value = '';
  } catch (error) {
    console.error('URL上传失败:', error);
    alert('URL上传失败，请检查地址是否正确');
  }
};
```

### 推荐的OCR服务
- 百度OCR API
- 腾讯云OCR
- 阿里云OCR
- 自建OCR服务（如Tesseract、PaddleOCR）

## 技术栈
- Vue 3 (Composition API)
- TypeScript
- Vue Router
- CSS3 (渐变、动画、响应式)

## 样式特点
- 使用渐变背景提升视觉效果
- 卡片式设计增强内容层次
- 微交互动画提升用户体验
- 适配移动端和桌面端

## 界面设计亮点

### 标题样式
- 🌍 **地球图标**：缓慢旋转动画，象征地质研究的全球视野
- 📝 **渐变标题**：蓝色系渐变（#2563eb → #3b82f6 → #06b6d4）
- ✨ **底部装饰线**：渐变下划线增强视觉效果
- 💫 **专业副标题**："智能识别地质报告 · 精准提取专业数据 · 高效构建知识图谱"

### 示例模板
展示真实的地质文档案例：
- 亚洲地貌圈及其板块造貌构造纲要
- 地学新两论：板块造貌构造学
- 板块构造与地貌形迹（上/下）

## API 集成状态

✅ **已完成集成 MinerU OCR API**

详细的 API 集成说明请查看：[MinerU_API集成说明.md](./MinerU_API集成说明.md)

### API 功能
- ✅ URL 在线文档解析
- ✅ 本地文件上传解析
- ✅ 批量文件处理
- ✅ 实时进度显示
- ✅ 自动轮询任务状态
- ✅ 结果文件下载

### API 配置
- **服务商**: MinerU (https://mineru.net)
- **API Token**: 已配置
- **模型版本**: VLM（视觉语言模型）
- **支持格式**: PDF、DOC、DOCX、PPT、PPTX、PNG、JPG、JPEG
- **文件限制**: 最大 200MB，最多 600 页

## 更新日志

### 2025-11-07
- ✅ 创建地质文档数字化页面
- ✅ 添加本地上传和URL上传功能
- ✅ 实现文件列表管理
- ✅ 添加批量处理功能
- ✅ 设计简洁专业的界面风格
- ✅ 优化标题样式（渐变效果、旋转图标）
- ✅ 更新示例模板为地质专业内容
- ✅ **完成 MinerU OCR API 集成**
- ✅ **实现文档解析功能**
- ✅ **添加实时进度显示**
- ✅ **支持结果下载**

