# 地质文档数字化系统

## 📖 项目简介

基于 MinerU OCR API 的智能地质文档数字化系统，支持地质报告、地质书籍等专业文档的自动解析和数字化处理。

### ✨ 核心功能

- 🌐 **URL 在线解析** - 直接输入文档链接进行解析
- 📁 **本地文件上传** - 支持拖拽上传和批量处理
- 📊 **实时进度显示** - 解析页数实时更新
- 💾 **多格式输出** - Markdown、JSON、图片等格式
- 🎯 **专业定制** - 针对地质文档优化

### 🎨 界面特色

- 简洁现代的扁平化设计
- 柔和的蓝色系配色
- 地球图标缓慢旋转动画
- 实时状态反馈
- 响应式布局

---

## 🚀 快速开始

### 安装依赖

```bash
cd mapView-main
npm install
```

### 启动开发服务器

```bash
npm run dev
```

### 访问应用

打开浏览器访问：`http://localhost:5173`

点击 **🌍 地质文档数字化** 按钮进入功能页面

---

## ⚡ 快速使用

### ✅ 推荐方式：URL 上传

由于浏览器安全限制，**强烈推荐使用 URL 上传方式**：

1. **准备文件直链**
   - 将文件上传到阿里云 OSS、腾讯云 COS 等对象存储
   - 或使用 GitHub Release、七牛云等服务
   - 详细方法：[如何获取文件直链URL.md](./如何获取文件直链URL.md)

2. **使用系统解析**
   - 切换到"URL 上传"标签
   - 输入文件直链URL
   - 点击"提交"
   - 等待解析完成
   - 下载结果ZIP文件

### ⚠️ 本地文件上传

- 由于浏览器 CORS 限制，本地文件直接上传会失败
- 点击时会弹出警告提示
- 建议改用 URL 上传方式
- 详情查看：[CORS问题解决方案.md](./CORS问题解决方案.md)

---

## 📚 文档导航

### 用户文档

1. **[快速开始指南](./快速开始-地质文档数字化.md)** 📘
   - 5分钟快速上手
   - 详细操作步骤
   - 使用示例和技巧

2. **[功能说明文档](./文档数字化功能说明.md)** 📗
   - 完整功能介绍
   - 界面设计说明
   - 技术栈说明

3. **[如何获取文件直链URL](./如何获取文件直链URL.md)** 📙
   - 阿里云 OSS 使用指南
   - 腾讯云 COS 使用指南
   - 多种获取直链的方法
   - 实际操作示例

### 开发者文档

4. **[MinerU API 集成说明](./MinerU_API集成说明.md)** 📕
   - API 接口详解
   - 参数配置说明
   - 错误码参考
   - 性能优化建议

5. **[CORS 问题解决方案](./CORS问题解决方案.md)** 📔
   - CORS 问题说明
   - 解决方案详解
   - 故障排查指南
   - 生产环境部署

---

## 🎯 主要功能

### 1. URL 在线文档解析 ✅ 推荐

```
输入 URL → 自动下载 → 开始解析 → 显示进度 → 下载结果
```

**特点：**
- ✅ 无 CORS 限制
- ✅ 稳定可靠
- ✅ 适合各种场景
- ✅ 支持大文件

**使用说明：**
- 需要文件的直链 URL（可公开访问）
- 如何获取：查看 [如何获取文件直链URL.md](./如何获取文件直链URL.md)

### 2. 本地文件上传 ⚠️ 有限制

```
选择文件 → 上传到云端 → 开始解析 → 实时进度 → 下载结果
```

**限制说明：**
- ⚠️ 由于浏览器安全策略，直接上传会被阻止
- ⚠️ 点击"开始解析"时会提示
- ⚠️ 建议改用 URL 上传方式

**适用场景：**
- 配置了后端服务器代理
- 或作为功能演示

### 3. 批量文件处理

```
选择多个文件 → 批量上传 → 并行解析 → 独立进度 → 批量下载
```

**特点：**
- 提高效率
- 节省时间
- 适合大规模处理

---

## 📦 支持格式

| 类型 | 格式 | 大小限制 | 页数限制 |
|------|------|----------|----------|
| PDF | .pdf | 200 MB | 600 页 |
| Word | .doc, .docx | 200 MB | 600 页 |
| PPT | .ppt, .pptx | 200 MB | 600 页 |
| 图片 | .png, .jpg, .jpeg | 200 MB | - |

---

## 🔧 技术栈

### 前端框架
- **Vue 3** - 渐进式 JavaScript 框架
- **TypeScript** - 类型安全
- **Vue Router** - 路由管理

### API 服务
- **MinerU API** - 文档解析服务
- **VLM 模型** - 视觉语言模型

### 样式
- **CSS3** - 渐变、动画、响应式
- **Flexbox & Grid** - 现代布局

---

## 📁 项目结构

```
mapView-main/
├── src/
│   ├── api/
│   │   └── mineruApi.ts           # MinerU API 封装
│   ├── views/
│   │   ├── HomePage.vue            # 主页
│   │   └── DocumentDigitalizationPage.vue  # 文档数字化页面
│   └── router/
│       └── index.ts                # 路由配置
├── public/
│   └── images/                     # 示例图片
├── README-地质文档数字化.md        # 本文件
├── 快速开始-地质文档数字化.md       # 快速开始指南
├── 文档数字化功能说明.md           # 功能说明
└── MinerU_API集成说明.md          # API 文档
```

---

## 🎨 界面预览

### 主页
- 功能入口按钮：🌍 地质文档数字化
- 集成在右侧控制面板中

### 文档数字化页面

**顶部导航**
```
← [返回] 🌍 地质文档数字化
━━━━━━━━━━━━━━━━━━━━
智能识别地质报告 · 精准提取专业数据 · 高效构建知识图谱
```

**上传区域**
- 本地上传 / URL上传 切换标签
- 拖拽上传区域
- 文档类型选择（地质报告/地质书籍/其他）

**文件列表**
- 文件名 | 大小 | 状态 | 进度 | 操作按钮
- 批量操作按钮

**示例模板**
- 亚洲地貌圈及其板块造貌构造纲要
- 地学新两论：板块造貌构造学
- 板块构造与地貌形迹（上/下）

---

## ⚙️ 配置说明

### API Token
位置：`src/api/mineruApi.ts`

```typescript
const API_TOKEN = 'your_token_here';
```

**注意：** 生产环境建议使用环境变量

### 解析参数

在 `DocumentDigitalizationPage.vue` 中可配置：

```typescript
{
  model_version: 'vlm',      // 模型版本
  enable_formula: true,       // 公式识别
  enable_table: true,         // 表格识别
  language: 'ch',             // 中文
}
```

---

## 🔍 状态说明

| 状态 | 颜色 | 说明 |
|------|------|------|
| 待处理 | 灰色 | 文件已添加，等待处理 |
| 上传中 | 紫色 | 正在上传文件到云端 |
| 解析中 | 蓝色 | 正在解析文档内容 |
| 已完成 | 绿色 | 解析成功，可下载结果 |
| 失败 | 红色 | 解析失败，查看错误信息 |

---

## ⚠️ 使用限制

### 文件限制
- 单个文件：≤ 200 MB
- 文档页数：≤ 600 页
- 批量上传：≤ 200 个文件/次

### 额度限制
- 每日免费：2000 页高优先级
- 超额后：优先级降低但仍可用
- 次日重置

### 网络限制
- 国外 URL（GitHub、AWS）可能超时
- 建议使用国内可访问的 URL
- 或下载到本地后上传

---

## 🐛 常见问题

### Q: Token 过期怎么办？
**A:** 到 MinerU 官网重新申请 Token，更新 `mineruApi.ts` 中的配置。

### Q: 文件上传失败？
**A:** 
1. 检查文件大小（≤200MB）
2. 检查文件格式是否支持
3. 检查网络连接
4. 查看详细错误信息

### Q: 解析很慢？
**A:**
1. 文件越大，解析时间越长
2. 高峰期可能排队等待
3. 页数越多，时间越长
4. 正常范围：1-5 分钟

### Q: 结果文件在哪里？
**A:** 点击「下载结果」按钮，会下载一个 ZIP 文件到浏览器默认下载目录。

---

## 🔄 更新日志

### v1.0.0 (2025-11-07)

#### 新功能
- ✅ 集成 MinerU OCR API
- ✅ URL 在线文档解析
- ✅ 本地文件上传解析
- ✅ 批量文件处理
- ✅ 实时进度显示
- ✅ 自动任务轮询
- ✅ 结果文件下载

#### 界面优化
- ✅ 地球图标旋转动画
- ✅ 渐变标题效果
- ✅ 状态颜色区分
- ✅ 进度实时更新
- ✅ 错误信息提示

#### 文档
- ✅ 快速开始指南
- ✅ 功能说明文档
- ✅ API 集成文档
- ✅ README 汇总

---

## 🚀 后续规划

### Phase 2
- [ ] Token 环境变量配置
- [ ] 结果在线预览
- [ ] 历史记录管理
- [ ] 文件校验优化

### Phase 3
- [ ] 批注功能
- [ ] 多人协作
- [ ] 知识图谱构建
- [ ] AI 问答功能

---

## 📞 技术支持

### 官方资源
- **MinerU 官网**: https://mineru.net
- **API 文档**: https://mineru.net/api/docs

### 项目文档
- **快速开始**: [快速开始-地质文档数字化.md](./快速开始-地质文档数字化.md)
- **功能说明**: [文档数字化功能说明.md](./文档数字化功能说明.md)
- **API 文档**: [MinerU_API集成说明.md](./MinerU_API集成说明.md)

---

## 📄 许可证

本项目仅供学习和研究使用。

MinerU API 服务由 MinerU 提供，受其服务条款约束。

---

## 🙏 致谢

- **MinerU** - 提供强大的文档解析 API
- **Vue.js** - 优秀的前端框架
- **TypeScript** - 类型安全保障

---

## 🎉 开始使用

准备好了吗？让我们开始数字化您的地质文档！

```bash
npm install
npm run dev
```

访问 `http://localhost:5173`，点击 **🌍 地质文档数字化** 开始使用！

**祝您使用愉快！** 🚀📚🌍

